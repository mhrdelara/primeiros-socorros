<!DOCTYPE html>
<html lang="PT-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../assets/styles/main.css" />
    <link rel="stylesheet" href="../assets/styles/layout.css" />
    <link
      rel="stylesheet"
      href="../assets/styles/tela-inicial/tela-inicial.css"
    />
    <link
      rel="stylesheet"
      href="../assets/styles/tela-modal/tela-excluir-mensagem.css"
    />
    <link
      rel="shortcut icon"
      href="../assets/images/icons/favicon.ico"
      type="image/x-icon"
    />
    <link rel="stylesheet" href="../assets/styles/tela-modal/tela-modal.css" />
    <link
      rel="stylesheet"
      href="../assets/styles/tela-modal/tela-excluir-conta.css"
    />
    <link
      rel="stylesheet"
      href="../assets/styles/tela-modal/tela-sair-conta.css"
    />
    <link
      href="https://unpkg.com/cropperjs/dist/cropper.min.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/cropperjs"></script>

    <script src="../assets/scripts/modal.js" defer></script>
    <script src="../assets/scripts/foto-perfil.js" defer></script>
    <script src="../assets/scripts/auth-control.js"></script>
    <script src="../assets/scripts/mic.js" defer></script>
    <script src="../assets/scripts/delete-account.js" defer></script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <title>Atitude Vital</title>
  </head>
  <body>
    <header>
      <img src="../assets/images/logo/Atitude Vital.png" alt="Logo" />
      <div class="header-down">
        <a href="./tela-cadastro" id="login-logout">
          <p>Inscrever-se <span>ou</span> entrar</p>
        </a>
      </div>
    </header>

    <div class="back-modal-delete" onclick="closeAllModals()"></div>
    <div class="confirm-modal-delete">
      <div class="modal-content-delete">
        <div class="delete-square">
          <p>Excluir conta?</p>
        </div>

        <div class="frame-btn-delete">
          <button id="btnSimDelete" onclick="showModalMensage()">
            <p>Sim</p>
          </button>
          <button id="btnNaoDelete"><p>Não</p></button>
        </div>
      </div>
    </div>

    <div class="back-modal-exit" onclick="closeAllModals()"></div>
    <div class="confirm-modal-exit">
      <div class="modal-content-exit">
        <div class="exit-square">
          <p>Sair da conta?</p>
        </div>

        <div class="frame-btn-exit">
          <button id="btnSimExit"><p>Sim</p></button>
          <button id="btnNaoExit"><p>Não</p></button>
        </div>
      </div>
    </div>

    <div class="mensage-modal-delete">
      <div class="mensage">
        <p>Conta excluída com sucesso</p>
      </div>
    </div>

    <div class="modal">
      <div class="header-modal">
        <div class="foto-container" id="foto-container-modal">
          <img
            class="foto-perfil"
            id="foto-perfil-modal"
            src="../assets/images/icons/3d_avatar_1.svg"
            alt="Foto de perfil"
          />
          <div id="dad-editar-foto">
            <img
              id="editar-foto"
              src="../assets/images/icons/editar-foto.svg"
              alt="Editar foto de perfil"
            />
          </div>
          <input
            class="disable"
            type="file"
            id="img"
            accept="image"
            name="img"
          />
        </div>
      </div>

      <div class="dad-card">
        <div id="card">
          <h1>Nome de usuário</h1>
          <p>@joaosilva</p>
        </div>
      </div>

      <div class="dad-card">
        <a href="./tela-postagem.html" id="post-content">
          <div class="card">
            <h1>Postar conteúdo</h1>
            <img
              src="../assets/images/icons/camera.svg"
              alt="Postagem de conteúdos"
            />
          </div>
        </a>
      </div>

      <div class="dad-card">
        <a href="./tela-alterar-usuario.html" id="edit-account">
          <div class="card">
            <h1>Editar conta</h1>
            <img
              src="../assets/images/icons/editar-conta.svg"
              alt="Editar conta"
            />
          </div>
        </a>
      </div>

      <div class="dad-card">
        <button id="delete-account" onclick="showModalDelete()">
          <div class="card">
            <h1>Excluir conta</h1>
            <img
              src="../assets/images/icons/excluir-conta.svg"
              alt="Excluir conta"
            />
          </div>
        </button>
      </div>

      <div class="dad-card">
        <button id="exit" onclick="showModalExit()">
          <div id="card1">
            <h1>Sair</h1>
            <img src="../assets/images/icons/exit.svg" alt="Sair da conta" />
          </div>
        </button>
      </div>
    </div>

    <div class="back-modal disable" onclick="closeAllModals()"></div>

    <main>
      <div class="dad-search">
        <div class="search">
          <form id="pesquisa">
            <input
              type="text"
              placeholder="Pesquisar..."
              class="pesquisar"
              id="pesquisar"
              autocomplete="off"
            />
          </form>

          <button id="mic-btn" class="mic">
            <img
              class="mutado"
              id="mutado"
              src="../assets/images/icons/microfone-mutado.svg"
              alt="Microfone"
            />
          </button>
        </div>

        <button id="opcoes" onclick="showModal()">
          <img src="../assets/images/icons/barra.svg" alt="Opções" />
        </button>
      </div>
    </main>

    <div class="dad-box">
      <div class="box">
        <div class="dad-informations">
          <h1>INFORMAÇÕES</h1>
        </div>

        <div class="dad-text">
          <p>Números de emergência no Brasil:</p>
          <ul>
            <li>Polícia Militar: 190</li>
            <li>Bombeiros: 193</li>
            <li>SAMU: 192</li>
            <li>CVV: 188</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="dad-temas">
      <div class="temas">
        <p>Temas mais procurados</p>
      </div>
    </div>

    <section></section>

    <script defer>
      addEventListener("DOMContentLoaded", () => {
        closeAllModals();
      });

      const links = [
        { texto: "Reanimação", link: "Reanimação" },
        { texto: "Ferimentos", link: "Ferimentos" },
        { texto: "Engasgo", link: "Engasgo" },
        { texto: "AVC", link: "AVC" },
      ];

      const section = document.querySelector("section");

      links.forEach((link) => {
        section.innerHTML += `
        <a
          href="../pages/recomendacao.html?query=${encodeURIComponent(
            link.link
          )}"
          class="son-quadrado"
        >
          <div class="quadrado-video"></div>
          <p>${link.texto}</p>
        </a>
      `;
      });
    </script>

    <script>
      document
        .getElementById("pesquisa")
        .addEventListener("submit", function (event) {
          event.preventDefault();
          const valor = document.getElementById("pesquisar").value.trim();
          if (valor) {
            window.location.href = `./recomendacao.html?query=${encodeURIComponent(
              valor
            )}`;
          }
        });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const headerDown = document.querySelector(".header-down");
        const opcoesBtn = document.getElementById("opcoes");
        const usuarioLogado = JSON.parse(localStorage.getItem("usuarioLogado"));

        if (usuarioLogado) {
          // Remove o link "inscrever-se"
          headerDown.innerHTML = `
        <div class="foto-container id="foto-container-header"">
          <img class="foto-perfil" 
          id="foto-perfil-header"
          src="${
            usuarioLogado.foto_perfil ||
            "../assets/images/icons/3d_avatar_1.svg"
          }" alt="Foto de perfil">
        </div>
      `;

          // Mostra botão de opções
          opcoesBtn.style.display = "block";
        } else {
          // Se não estiver logado, oculta o botão de opções
          opcoesBtn.style.display = "none";
        }
      });
    </script>
  </body>
</html>
